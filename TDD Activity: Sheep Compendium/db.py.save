from fastapi.testclient import TestClient
# FIX: Simple module import works now because we run pytest from the project root
from main import app

client = TestClient(app)

# Test case for reading an existing sheep
def test_read_sheep():
    response = client.get("/sheep/1")
    assert response.status_code == 200
    assert response.json() == {
        "id": 1,
        "name": "Spice",
        "breed": "Gotland",
        "sex": "ewe"
    }

# Test case for adding a new sheep
def test_add_sheep():
    new_sheep_data = {
        "id": 7,
        "name": "Baa-bara",
        "breed": "Suffolk",
        "sex": "ewe"
    }
    
    response = client.post("/sheep", json=new_sheep_data) 
    assert response.status_code == 201 
    assert response.json() == new_sheep_data 
    
    retrieved_sheep = client.get("/sheep/7")
    assert retrieved_sheep.json() == new_sheep_data
    assert retrieved_sheep.status_code == from pydantic import BaseM